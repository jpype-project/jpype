os:
  - linux

language: python

python:
  - '2.6'
  - '2.7'
  - '3.3'
  - '3.4'
  - '3.5'
  - 'pypy'
  - 'pypy3'
  - "nightly"

sudo: false

env:
  # one build with and without numpy support (opt numpy out)
  - NUMPY_="numpy x.x" # use specified numpy version
  - NUMPY_="python" # set the numpy dependency in conda-recipe to python

matrix:
  allow_failures:
    - python: 'pypy'
      env: NUMPY="--install-option=--disable-numpy"
    - python: 'pypy3'
      env: NUMPY="--install-option=--disable-numpy"
    - python: 'pypy'
      env: NUMPY=""
    - python: 'pypy3'
      env: NUMPY=""
    - python: 'nightly'

install:
  - source devtools/install_miniconda.sh
  - conda install conda-build -qy
script:
  - conda build devtools/conda-recipe -qy --numpy=112
